<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset="utf-8">
  <title>Population Comparator</title>
  <style>
  body {
    text-align: center;
    margin-top: 15em;
  }
  </style>
</head>
<body>

  <div>
    How does the age population compare between
    <select id='select1'>{{options1}}</select>
    and
    <select id='select2'>{{options2}}</select>
    in 2016?
  </div>
  <br>
  <div>
    <button onclick='compare();'>Compare</button>
  </div>

  <script>

  function compare() {
    var select1 = document.getElementById('select1');
    var country1 = select1.options[select1.selectedIndex].text;
    var select2 = document.getElementById('select2');
    var country2 = select2.options[select2.selectedIndex].text;
    post('/', {'country1': country1, 'country2': country2}, 'POST');
  }

  // This function is copied from the answer to https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit
  function post(path, params, method) {
    method = method || "post";
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);
    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);
            form.appendChild(hiddenField);
         }
    }
    document.body.appendChild(form);
    form.submit();
  }

  </script>
</body>
</html>